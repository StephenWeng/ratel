<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8"></meta>
<meta name="viewport" content="width=device-width, initial-scale=1"></meta>
<head th:include="common/header :: head"></head>
<link rel="stylesheet" th:href="@{/css/protal.css}"></link>
<body>
	<div id="protal">
		<el-container>
			<!-- 页头 -->
		  	<el-header>
		  		<el-radio-group v-model="isCollapse" style="margin-bottom: 20px;">
					<el-radio-button :label="false">开</el-radio-button>
					<el-radio-button :label="true">收起</el-radio-button>
				</el-radio-group>
			</el-header>
		  	<el-container>
		  		<!-- 左侧菜单项 -->
		    	<el-aside id="aside" width="200px;">
		    		<el-row class="tac">
						<el-menu default-active="1-2" :collapse="isCollapse">
					      	<el-submenu index="1">
					        	<template slot="title">
					          		<i class="el-icon-location"></i>
					          		<span>基础管理</span>
					        	</template>
					        	<el-menu-item-group>
					          		<template slot="title">用户、部门</template>
					          		<el-menu-item index="1-1">用户管理</el-menu-item>
					          		<el-menu-item index="1-2">部门管理</el-menu-item>
					        	</el-menu-item-group>
					        	<el-menu-item-group>
					          		<template slot="title">资源管理</template>
					          		<el-menu-item index="1-3">资源管理</el-menu-item>
					          		<el-menu-item index="1-4">资源分配</el-menu-item>
					        	</el-menu-item-group>
					      	</el-submenu>
					      	<el-menu-item index="2">
					        	<i class="el-icon-menu"></i>
					        	<span slot="title">导航二</span>
					      	</el-menu-item>
					    </el-menu>
		    		</el-row>
		    	</el-aside>
		    	<!-- 页面正中，切换页面区域 -->
		    	<el-container>
		      		<el-main id='main'>
		      		
		      				<el-table style="width: 100%;" :data="userList.slice((currentPage-1)*pagesize,currentPage*pagesize)"  >
                        <el-table-column type="index" width="50">    
                        </el-table-column>
                        <el-table-column label="日期" prop="date" width="180">    
                        </el-table-column>
                        <el-table-column label="用户姓名" prop="name" width="180">    
                        </el-table-column>
                        <el-table-column label="邮箱" prop="email" width="180">    
                        </el-table-column>
                        <el-table-column label="地址" prop="address" width="200">    
                        </el-table-column>    
                    </el-table>
                        <el-pagination
                            @size-change="handleSizeChange"
                            @current-change="handleCurrentChange"
                            :current-page="currentPage"
                            :page-sizes="[5, 10, 20, 40]" 
                            :page-size="pagesize"      
                            layout="total, sizes, prev, pager, next, jumper"
                            :total="userList.length">   
                    </el-pagination>
		      		
		      		
		      		
		      		
		      		
		      		
		      		
		      		
		      		
		      		
		      		
		      		
		      		</el-main>
		      		<!-- 页脚 -->
		      		<el-footer>
		      			<el-row type="flex" class="row-bg" justify="center">
		      				<div th:include="common/bottom :: div"></div>
		      			</el-row>
		      		</el-footer>
		    	</el-container>
		  	</el-container>
		</el-container>
	</div> 
</body>
  <script>
		var vm=new Vue({
			el:'#protal',
			data() {
				return {
					bottomDialogVisible: false,//底部平头哥联系方式弹出框
					isCollapse: true,
					activeMenu:'1-2',//当前激活的菜单
					currentPage:1, //初始页
	                pagesize:10,    //    每页的数据
	                userList: []
				}
			},
			methods:{
				init:function(){
					vm.handleUserList
				},
				handleUserList() {
		            this.$http.get('http://localhost:8080/userList').then(res => {  //这是从本地请求的数据接口，
		                this.userList = res.body;
		            })
		        }
				// 初始页currentPage、初始每页数据数pagesize和数据data
		        handleSizeChange: function (size) {
		                this.pagesize = size;
		                console.log(this.pagesize)  //每页下拉显示数据
		        },
		        handleCurrentChange: function(currentPage){
		                this.currentPage = currentPage;
		                console.log(this.currentPage)  //点击第几页
		        },
				//底部平头哥弹出框关闭事件
				bottomHandleClose(done) {
					done();
			    }
			}
		})
		/* 页面加载时触发事件 */
		window.onload=function(){ 
      		vm.init();
      		//页面初始化时，设置高度
      		setAsideHeight();
  		}
		
		window.onresize = function(){
			//页面改变窗口时，设置高度
			setAsideHeight();
		}
		
		/**
		* 修改页面主体高度
		*/
		function setAsideHeight(){
			document.getElementById("aside").style.height= (getWinHeight()-(40)) +"px";
			document.getElementById("main").style.height= (getWinHeight()-(40+30)) +"px";
		}
  </script>
</html>